<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GPT Chatbot</title>
</head>
<body>
    <h1>GPT Chatbot</h1>
    <div id="chatbox"></div>
    <input type="text" id="message">
    <div>change</div>
    <button onclick="sendMessage()">Send</button>

    <script>
        const API_KEY = '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';
        const URL = 'https://api.openai.com/v1/engines/davinci-codex/completions';

        let conversation = [];

        async function sendMessage() {
            let input = document.getElementById('message').value;
            document.getElementById('message').value = '';
            conversation.push(`You: ${input}`);

            let response = await getResponse(input);

            conversation.push(`Bot: ${response}`);

            updateChat();
        }

        async function getResponse(input) {
            let body = {
                prompt: input,
                max_tokens: 150,
                model: 'text-davinci-002',
                engine: 'davinci-codex',
                temperature: 0.5,
                top_p: 1,
                n: 1,
                stream: false,
                stop: ['\n']
            };

            let options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${API_KEY}`
                },
                body: JSON.stringify(body)
            };

            let response = await fetch(URL, options);
            let json = await response.json();

            return json.choices[0].text;
        }

        function updateChat() {
            let chatbox = document.getElementById('chatbox');
            chatbox.innerHTML = '';
            for (let i = 0; i < conversation.length; i++) {
                let message = document.createElement('div');
                message.innerHTML = conversation[i];
                chatbox.appendChild(message);
            }
        }
    </script>
</body>
</html>
